<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Meta Tags -->
    <title>CalciPrep - Gamified Learning for Competitive Exams</title>
    <meta name="description" content="Practice smarter for competitive exams with CalciPrep. Master Maths, English vocabulary, and typing with gamified challenges and progress tracking to solve faster and achieve more.">
    <meta name="keywords" content="CalciPrep, SSC practice, maths calculation practice, english vocabulary, blackbook english, online quiz, exam preparation, typing practice">
    <link rel="canonical" href="https://calciprep.online/" />
    <meta name="google-adsense-account" content="ca-pub-2382040431534049">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/svg+xml" href="media/favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="media/apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#8B5CF6">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Work+Sans:wght@400;500;600;700;800&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- GSAP & Three.js Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --primary-color: #8B5CF6;
            --secondary-color: #A78BFA;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Work Sans', sans-serif;
            background-color: #F9FAFB; /* Off-white background */
            color: #1F2937;
            overflow-x: hidden; /* Prevent horizontal scroll from animations */
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Abril+Fatface', cursive;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, #8B5CF6, #6366F1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .btn-primary-dark {
            background-color: #111827; /* Dark button like in the image */
            color: #FFFFFF;
            transition: all 0.3s ease;
        }
        .btn-primary-dark:hover {
             background-color: #374151;
        }

        .subject-card {
            border: 1px solid #F3F4F6;
            border-radius: 1.5rem; /* 24px */
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }
        
        /* Card Colors */
        .subject-card[data-card="1"] { background-color: #F3E8FF; } /* Light purple */
        .subject-card[data-card="2"] { background-color: #E0E7FF; } /* Light blue */
        .subject-card[data-card="3"] { background-color: #FEF3C7; } /* Light yellow */
        
        /* Mobile specific layout */
        @media (max-width: 1023px) {
            #cards-wrapper {
                position: relative;
                width: 100%;
                max-width: 340px;
                min-height: 520px;
                margin-top: 2rem;
                touch-action: pan-y;
            }
             #cards-wrapper .subject-card {
                position: absolute;
                transform-origin: bottom center;
                width: 100%;
                height: 450px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            }
        }

        /* Desktop layout overrides */
        @media (min-width: 1024px) {
            #subjects-interactive-container { position: relative; min-height: 500px; }
            #illustration-wrapper { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100vw; height: 450px; z-index: 1; pointer-events: none; }
            #cards-wrapper { position: relative; z-index: 2; display: flex; justify-content: center; align-items: center; min-height: 450px; }
            #cards-wrapper .subject-card { position: absolute; width: 320px; height: 450px; box-shadow: 0 10px 20px rgba(0,0,0,0.08); transform-origin: center center; }
        }

        /* --- New Styles for Card Beam Animation --- */
        #features { background-color: #000000; color: #fff; }
        #features .gradient-text { background: linear-gradient(90deg, #A78BFA, #38BDF8); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        #features p { color: #a1a1aa; }
        .beam-container { position: relative; width: 100vw; height: 500px; display: flex; align-items: center; justify-content: center; margin-left: 50%; transform: translateX(-50%); }
        .card-stream { position: absolute; width: 100%; height: 250px; display: flex; align-items: center; overflow: visible; }
        .card-line { display: flex; align-items: center; gap: 40px; white-space: nowrap; will-change: transform; }
        .beam-card-wrapper { position: relative; width: 400px; height: 250px; flex-shrink: 0; perspective: 1000px; }
        .beam-card {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 15px; overflow: hidden;
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
        }
        .beam-card-wrapper:hover .beam-card {
            transform: rotateY(10deg) rotateX(5deg);
        }
        .beam-card-normal {
            background: #18181b;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
            color: white;
            z-index: 2;
            clip-path: inset(0 0 0 var(--clip-right, 0%));
        }
        .beam-card-ascii {
            background: #18181b;
            z-index: 1;
            clip-path: inset(0 calc(100% - var(--clip-left, 0%)) 0 0);
        }
        .ascii-content {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            padding: 1rem;
            color: #ffffff; 
            font-family: 'Roboto Mono', monospace;
            font-size: 10px; line-height: 12px; overflow: hidden; white-space: pre;
            -webkit-mask-image: linear-gradient(to right, black 70%, transparent 100%);
            mask-image: linear-gradient(to right, black 70%, transparent 100%);
        }
        #particleCanvas, #scannerCanvas { position: absolute; top: 50%; left: 0; transform: translateY(-50%); width: 100%; height: 300px; z-index: 0; pointer-events: none; }
        #scannerCanvas { z-index: 5; }
        
    </style>
</head>
<body>
    <div id="nav-placeholder"></div>

    <main>
        <!-- Hero Section -->
        <section id="home" class="pt-28 pb-12 lg:pt-32 lg:pb-20">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="bg-amber-300 rounded-3xl p-8 md:p-12 lg:p-16">
                    <div class="grid lg:grid-cols-2 gap-12 items-center">
                        <div class="text-center lg:text-left">
                            <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold leading-tight mb-6 text-gray-900">
                                Sharpen your skills with fun, <span class="text-white">gamified practice</span>
                            </h1>
                            <p class="text-base md:text-lg text-gray-800 max-w-lg mx-auto lg:mx-0 mb-8">
                                Prepare for your exams the fun way. CalciPrep offers free, game-like exercises to improve your speed, accuracy, and confidence.
                            </p>
                            <a href="#subjects" class="btn-primary-dark px-8 py-3 rounded-xl font-bold text-lg inline-flex items-center">Start now</a>
                        </div>
                        <div class="flex justify-center items-center">
                            <img src="media/hero-illustration.svg" alt="Skills Illustration" class="w-full max-w-sm md:max-w-md lg:max-w-lg h-auto">
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Subjects Section -->
        <section id="subjects" class="py-12 lg:py-20 bg-gray-50 overflow-hidden">
            <div class="container mx-auto px-6">
                <div id="subjects-interactive-container">
                    <div id="illustration-wrapper" class="hidden lg:block">
                        <img id="subjects-illustration" src="media/subjects-illustration.svg" alt="Subjects background illustration" class="w-full h-full object-cover">
                    </div>
                    <div class="relative z-20">
                        <div class="text-center max-w-2xl mx-auto">
                             <h2 class="text-4xl md:text-5xl font-extrabold mb-4 text-gray-900">Explore top <span class="text-red-500">subjects</span></h2>
                            <p class="text-gray-600">We have the largest selection of subjects to study with our online gamified exercises.</p>
                        </div>
                        <div id="cards-wrapper">
                            <a href="maths.html" class="subject-card" data-card="1">
                                <div class="p-8 text-center flex flex-col flex-grow">
                                     <div class="flex-shrink-0">
                                        <div class="bg-white/50 text-purple-600 w-16 h-16 rounded-xl flex items-center justify-center mb-6 mx-auto">
                                            <i data-lucide="calculator" class="w-8 h-8"></i>
                                        </div>
                                        <h3 class="text-2xl font-bold mb-3 text-gray-900">Maths Arena</h3>
                                        <p class="text-gray-600 text-sm">Sharpen your calculation speed and accuracy.</p>
                                     </div>
                                     <div class="mt-4 flex-grow flex justify-center items-center">
                                         <img src="media/maths-card-illustration.svg" alt="Maths Arena Illustration" class="max-h-28 w-auto">
                                     </div>
                                </div>
                                <div class="p-6 bg-white flex justify-between items-center flex-shrink-0">
                                    <span class="font-semibold text-gray-800">Explore</span>
                                    <i data-lucide="arrow-right" class="w-5 h-5 text-gray-600"></i>
                                </div>
                            </a>
                            <a href="english.html" class="subject-card" data-card="2">
                                <div class="p-8 text-center flex flex-col flex-grow">
                                    <div class="flex-shrink-0">
                                        <div class="bg-white/50 text-blue-600 w-16 h-16 rounded-xl flex items-center justify-center mb-6 mx-auto">
                                            <i data-lucide="book-open-text" class="w-8 h-8"></i>
                                        </div>
                                        <h3 class="text-2xl font-bold mb-3 text-gray-900">English Mastery</h3>
                                        <p class="text-gray-600 text-sm">Master vocabulary with interactive quizzes.</p>
                                    </div>
                                    <div class="mt-4 flex-grow flex justify-center items-center">
                                        <img src="media/english-card-illustration.svg" alt="English Mastery Illustration" class="max-h-28 w-auto">
                                    </div>
                                </div>
                                <div class="p-6 bg-white flex justify-between items-center flex-shrink-0">
                                    <span class="font-semibold text-gray-800">Explore</span>
                                    <i data-lucide="arrow-right" class="w-5 h-5 text-gray-600"></i>
                                </div>
                            </a>
                            <a href="typing-selection.html" class="subject-card" data-card="3">
                                <div class="p-8 text-center flex flex-col flex-grow">
                                    <div class="flex-shrink-0">
                                        <div class="bg-white/50 text-amber-600 w-16 h-16 rounded-xl flex items-center justify-center mb-6 mx-auto">
                                            <i data-lucide="keyboard" class="w-8 h-8"></i>
                                        </div>
                                        <h3 class="text-2xl font-bold mb-3 text-gray-900">Typing Arena</h3>
                                        <p class="text-gray-600 text-sm">Improve typing speed with guided lessons.</p>
                                    </div>
                                     <div class="mt-4 flex-grow flex justify-center items-center">
                                         <img src="media/typing-card-illustration.svg" alt="Typing Arena Illustration" class="max-h-28 w-auto">
                                     </div>
                                </div>
                                <div class="p-6 bg-white flex justify-between items-center flex-shrink-0">
                                    <span class="font-semibold text-gray-800">Explore</span>
                                    <i data-lucide="arrow-right" class="w-5 h-5 text-gray-600"></i>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================== -->
        <!-- Future Prep Section - REBUILT with Card Beam Animation             -->
        <!-- ================================================================== -->
        <section id="features" class="py-20">
            <div class="container mx-auto px-6">
                 <div class="mb-12 text-center" id="features-text-wrapper">
                    <h2 class="text-4xl md:text-5xl font-extrabold mb-4">The <span class="gradient-text">Future of Prep</span> is Here</h2>
                    <p class="max-w-2xl mx-auto">We're constantly working on new tools to supercharge your preparation.</p>
                </div>
            </div>
            <div class="beam-container">
                <canvas id="particleCanvas"></canvas>
                <canvas id="scannerCanvas"></canvas>
                <div class="card-stream" id="cardStream">
                  <div class="card-line" id="cardLine"></div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-gray-50 relative overflow-hidden">
            <div class="container mx-auto px-6 relative z-10">
                <div class="grid lg:grid-cols-2 gap-16 items-center">
                    <div class="text-center lg:text-left">
                        <h2 class="text-4xl md:text-5xl font-extrabold mb-4 text-gray-900">Get in <span class="gradient-text">Touch</span></h2>
                        <p class="text-gray-600 mb-8 max-w-lg mx-auto lg:mx-0">Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible.</p>
                        
                        <div class="space-y-6">
                            <div class="flex items-center space-x-4 justify-center lg:justify-start">
                                <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-lg flex items-center justify-center">
                                    <i data-lucide="mail" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg text-gray-900">Email</h3>
                                    <p class="text-gray-500">contact@calciprep.online</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4 justify-center lg:justify-start">
                                <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-lg flex items-center justify-center">
                                    <i data-lucide="phone" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg text-gray-900">Phone</h3>
                                    <p class="text-gray-500">+91-XXXXXXXXXX</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white border border-gray-200 p-8 rounded-2xl shadow-lg">
                        <form>
                            <div class="mb-5"><label for="name" class="block text-sm font-medium text-gray-700 mb-1">Your Name</label><input type="text" id="name" placeholder="John Doe" class="w-full bg-gray-50 p-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900"></div>
                             <div class="mb-5"><label for="email-contact" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label><input type="email" id="email-contact" placeholder="john@example.com" class="w-full bg-gray-50 p-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900"></div>
                            <div class="mb-5"><label for="subject" class="block text-sm font-medium text-gray-700 mb-1">Subject</label><input type="text" id="subject" placeholder="What is this about?" class="w-full bg-gray-50 p-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900"></div>
                            <div class="mb-6"><label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message</label><textarea id="message" placeholder="How can we help?" rows="4" class="w-full bg-gray-50 p-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900"></textarea></div>
                            <button type="submit" class="w-full bg-purple-600 text-white p-3 rounded-lg font-semibold transition-opacity hover:opacity-90">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="absolute bottom-0 left-1/2 -translate-x-1/2 z-0 hidden lg:block w-full max-w-6xl">
                <img src="media/contact-illustration.svg" alt="Contact Illustration" class="w-full h-auto">
            </div>
        </section>
    </main>

    <footer class="bg-white border-t border-gray-100 py-12">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-3 gap-8 text-gray-600">
                <div> <img src="media/New-logo.svg" alt="CalciPrep Logo" class="h-8 mb-4"> <p class="text-sm">Gamified learning for competitive exams. Solve faster, achieve more.</p> </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4 text-gray-800">Quick Links</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#home" class="hover:text-gray-900">Home</a></li>
                        <li><a href="#subjects" class="hover:text-gray-900">Subjects</a></li>
                        <li><a href="#features" class="hover:text-gray-900">Features</a></li>
                        <li><a href="#contact" class="hover:text-gray-900">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4 text-gray-800">Follow Us</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="hover:text-gray-900"><i data-lucide="twitter"></i></a>
                        <a href="#" class="hover:text-gray-900"><i data-lucide="send"></i></a>
                        <a href="#" class="hover:text-gray-900"><i data-lucide="youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-100 mt-8 pt-6 text-center text-gray-500 text-sm">
                <p>&copy; 2024 CalciPrep. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="nav.js" type="module" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            gsap.registerPlugin(ScrollTrigger);

            if (window.innerWidth < 1024) {
                // --- GSAP Animation Logic for Mobile Swipe ---
                const cardsWrapper = document.querySelector("#cards-wrapper");
                const cards = gsap.utils.toArray("#cards-wrapper .subject-card");
                let currentIndex = 0;

                function updateCardPositions(animated = false) {
                    cards.forEach((card, i) => {
                        const position = (i - currentIndex + cards.length) % cards.length;
                        const isVisible = position < 3;
                        const animationProps = { y: position * 20, rotation: position === 0 ? -4 : (position === 1 ? 0 : 4), zIndex: cards.length - position, opacity: isVisible ? 1 : 0, scale: 1 - position * 0.05, duration: animated ? 0.4 : 0, ease: 'power2.out' };
                        gsap.to(card, animationProps);
                    });
                }

                let startX = 0; let dragX = 0;
                function onTouchStart(e) { startX = e.touches[0].clientX; cardsWrapper.addEventListener('touchmove', onTouchMove); cardsWrapper.addEventListener('touchend', onTouchEnd); }
                function onTouchMove(e) { dragX = e.touches[0].clientX - startX; const topCard = cards[currentIndex]; gsap.to(topCard, { x: dragX, rotation: -4 + dragX / 30, duration: 0.2 }); }
                function onTouchEnd() {
                    cardsWrapper.removeEventListener('touchmove', onTouchMove); cardsWrapper.removeEventListener('touchend', onTouchEnd);
                    const topCard = cards[currentIndex];
                    if (dragX < -80) { // Swipe Left
                        gsap.to(topCard, { x: -400, opacity: 0, rotation: -20, duration: 0.4, ease: 'power2.in', onComplete: () => { gsap.set(topCard, { x: 0, opacity: 1 }); currentIndex = (currentIndex + 1) % cards.length; updateCardPositions(true); } });
                    } else if (dragX > 80) { // Swipe Right
                        const prevIndex = (currentIndex - 1 + cards.length) % cards.length; const prevCard = cards[prevIndex];
                        currentIndex = prevIndex;
                        gsap.set(prevCard, { x: -400, opacity: 0, rotation: -20, zIndex: 10 });
                        updateCardPositions(true);
                        gsap.to(prevCard, { x: 0, opacity: 1, duration: 0.4, ease: 'power2.out' });
                    } else { // Return to stack
                        gsap.to(topCard, { x: 0, rotation: -4, duration: 0.4, ease: 'back.out(1.7)' });
                    }
                    dragX = 0;
                }
                cardsWrapper.addEventListener('touchstart', onTouchStart);
                updateCardPositions(false);

            } else {
                // --- GSAP Animation Logic for Subjects Section (Desktop) ---
                const container = document.querySelector("#subjects-interactive-container");
                const cards = gsap.utils.toArray("#cards-wrapper .subject-card");
                const illustration = document.querySelector("#subjects-illustration");
                
                gsap.set(cards, { position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, margin: 'auto' });
                gsap.set(cards[0], { y: 0, rotation: -6, zIndex: 3 });
                gsap.set(cards[1], { y: 20, rotation: 2, zIndex: 2 });
                gsap.set(cards[2], { y: 40, rotation: 7, zIndex: 1 });

                const tl = gsap.timeline({ paused: true, defaults: { ease: "back.out(1.4)", duration: 0.7 } });
                tl.to(illustration, { opacity: 0.2, duration: 0.5, ease: "power2.inOut" }, 0)
                  .to(cards, { x: (i) => (i - 1) * 380, y: -20, rotation: (i) => (i - 1) * -8 }, 0);
                  
                container.addEventListener("mouseenter", () => tl.play());
                container.addEventListener("mouseleave", () => tl.reverse());

                cards.forEach(card => {
                    card.addEventListener("mouseenter", () => { if (tl.progress() > 0.9) { gsap.to(card, { y: -40, scale: 1.05, duration: 0.3, ease: "power2.out" }); } });
                    card.addEventListener("mouseleave", () => { if (tl.progress() > 0.9) { gsap.to(card, { y: -20, scale: 1, duration: 0.3, ease: "power2.out" }); } });
                });
            }

            // --- GSAP Animation for Features Section (Text and Cards) ---
            const featuresSection = document.getElementById('features');
            const featuresText = document.getElementById('features-text-wrapper');
            const featuresTl = gsap.timeline({ scrollTrigger: { trigger: featuresSection, start: "top 70%", toggleActions: "play none none reverse" } });
            featuresTl.from(featuresText.children, { y: 50, x: -50, opacity: 0, stagger: 0.1, ease: "power2.out", duration: 0.6 });
        });
    </script>

    <!-- Card Beam Animation Script -->
    <script>
    // This script is complex and relies on Three.js and advanced Canvas manipulation.
    // It's a direct, high-quality adaptation of the reference script you provided.
    document.addEventListener('DOMContentLoaded', () => {
        if (window.innerWidth < 1024) return; // Only run animation on desktop

        const cardData = [
            { icon: "graduation-cap", title: "Maths Classes", color: "#fda4af" },
            { icon: "bar-chart-3", title: "Advanced Analytics", color: "#7dd3fc" },
            { icon: "award", title: "Achievements & Badges", color: "#86efac" }
        ];
        
        const cardLine = document.getElementById("cardLine");
        const cardStream = document.getElementById("cardStream");
        const particleCanvas = document.getElementById("particleCanvas");
        const scannerCanvas = document.getElementById("scannerCanvas");

        if(!cardLine || !cardStream || !particleCanvas || !scannerCanvas) return;
        
        let cardStreamController, particleSystem, particleScanner;

        // CARD STREAM CONTROLLER
        class CardStreamController {
            constructor() {
                this.cardLine = cardLine;
                this.position = 0; this.velocity = 60; this.direction = -1;
                this.isAnimating = false; this.lastTime = 0;
                this.containerWidth = 0; this.cardLineWidth = 0;
                this.init();
            }
            init() {
                this.populateCardLine(); this.calculateDimensions();
                ScrollTrigger.create({
                    trigger: "#features", start: "top bottom", end: "bottom top",
                    onEnter: () => this.startAnimation(), onLeave: () => this.stopAnimation(),
                    onEnterBack: () => this.startAnimation(), onLeaveBack: () => this.stopAnimation(),
                });
                this.animate();
                window.addEventListener("resize", () => this.calculateDimensions());
            }
            startAnimation() { this.isAnimating = true; this.lastTime = performance.now(); if (particleScanner) particleScanner.isAnimating = true; }
            stopAnimation() { this.isAnimating = false; if (particleScanner) particleScanner.isAnimating = false; }
            calculateDimensions() { this.containerWidth = cardStream.offsetWidth; const cardWidth = 400; const cardGap = 40; this.cardLineWidth = (cardWidth + cardGap) * this.cardLine.children.length; }
            animate() {
                if (this.isAnimating) {
                    const currentTime = performance.now(); const deltaTime = (currentTime - this.lastTime) / 1000;
                    this.lastTime = currentTime; this.position += this.velocity * this.direction * deltaTime;
                    this.updateCardPosition();
                }
                requestAnimationFrame(() => this.animate());
            }
            updateCardPosition() {
                if (this.position < -this.cardLineWidth / 2) { this.position += this.cardLineWidth / 2; }
                if (this.position > 0) { this.position -= this.cardLineWidth / 2; }
                this.cardLine.style.transform = `translateX(${this.position}px)`;
                this.updateCardClipping();
            }
            generateCode(width, height) { const chars="abcdefghijklmnopqrstuvwxyz0123456789{}[]<>;:._-+=!@#$*|"; let code=""; for(let i=0; i<width*height; i++) { code += chars[Math.floor(Math.random()*chars.length)]; if((i+1)%width===0 && i<width*height-1) code+='\n'; } return code; }
            createCardWrapper(index) {
                const cardInfo = cardData[index % cardData.length];
                const wrapper = document.createElement("div"); wrapper.className = "beam-card-wrapper";
                const normalCard = document.createElement("div"); normalCard.className = "beam-card beam-card-normal p-6 flex flex-col";
                normalCard.innerHTML = `<div class="flex-shrink-0"><div class="bg-gray-800/50 w-12 h-12 rounded-lg flex items-center justify-center mb-4"><i data-lucide="${cardInfo.icon}" class="w-6 h-6" style="color:${cardInfo.color};"></i></div><h3 class="text-xl font-bold mb-2 text-white">${cardInfo.title}</h3></div><div class="mt-auto pt-4 text-gray-500 font-semibold text-sm">Coming Soon</div>`;
                const asciiCard = document.createElement("div"); asciiCard.className = "beam-card beam-card-ascii";
                const asciiContent = document.createElement("pre"); asciiContent.className = "ascii-content";
                asciiContent.textContent = this.generateCode(66, 20);
                asciiCard.appendChild(asciiContent); wrapper.appendChild(normalCard); wrapper.appendChild(asciiCard);
                return wrapper;
            }
            populateCardLine() { this.cardLine.innerHTML = ""; const count = 12; for (let i = 0; i < count; i++) { this.cardLine.appendChild(this.createCardWrapper(i)); } lucide.createIcons(); }
            updateCardClipping() {
                const scannerX = window.innerWidth / 2;
                let anyScanningActive = false;
                document.querySelectorAll(".beam-card-wrapper").forEach((wrapper) => {
                    const rect = wrapper.getBoundingClientRect(); const normalCard = wrapper.querySelector(".beam-card-normal"); const asciiCard = wrapper.querySelector(".beam-card-ascii");
                    if (rect.left < scannerX && rect.right > scannerX) {
                        anyScanningActive = true;
                        const clipPercent = ((scannerX - rect.left) / rect.width) * 100;
                        normalCard.style.setProperty("--clip-right", `${clipPercent}%`); asciiCard.style.setProperty("--clip-left", `${clipPercent}%`);
                    } else if (rect.right < scannerX) {
                        normalCard.style.setProperty("--clip-right", "100%"); asciiCard.style.setProperty("--clip-left", "100%");
                    } else {
                        normalCard.style.setProperty("--clip-right", "0%"); asciiCard.style.setProperty("--clip-left", "0%");
                    }
                });
                if (particleScanner) particleScanner.setScanningActive(anyScanningActive);
            }
        }

        // PARTICLE SCANNER (CANVAS 2D)
        class ParticleScanner {
            constructor() {
                this.canvas = scannerCanvas; this.ctx = this.canvas.getContext("2d");
                this.w = window.innerWidth; this.h = 300; this.lightBarX = this.w / 2;
                this.scanningActive = false; this.isAnimating = false;
                this.currentGlowIntensity = 1; this.transitionSpeed = 0.05;
                this.setupCanvas(); this.animate();
                window.addEventListener("resize", () => this.onResize());
            }
            setupCanvas() { this.canvas.width = this.w; this.canvas.height = this.h; this.ctx.clearRect(0, 0, this.w, this.h); }
            onResize() { this.w = window.innerWidth; this.lightBarX = this.w / 2; this.setupCanvas(); }
            setScanningActive(active) { this.scanningActive = active; }
            animate() { if(this.isAnimating) { this.render(); } requestAnimationFrame(() => this.animate()); }
            render() {
                this.ctx.clearRect(0, 0, this.w, this.h);
                const targetGlowIntensity = this.scanningActive ? 3.5 : 1;
                this.currentGlowIntensity += (targetGlowIntensity - this.currentGlowIntensity) * this.transitionSpeed;
                const glow = this.currentGlowIntensity;
                const coreGradient = this.ctx.createLinearGradient(this.lightBarX-1, 0, this.lightBarX+1, 0);
                coreGradient.addColorStop(0,"rgba(255,255,255,0)"); coreGradient.addColorStop(0.5,`rgba(255,255,255,${1*glow})`); coreGradient.addColorStop(1,"rgba(255,255,255,0)");
                this.ctx.fillStyle = coreGradient; this.ctx.fillRect(this.lightBarX - 1.5, 0, 3, this.h);

                const glowGradient = this.ctx.createRadialGradient(this.lightBarX, this.h/2, 0, this.lightBarX, this.h/2, 40*glow);
                glowGradient.addColorStop(0, `rgba(167, 139, 250, ${0.4*glow})`); glowGradient.addColorStop(0.5, `rgba(167, 139, 250, ${0.1*glow})`); glowGradient.addColorStop(1, "rgba(167, 139, 250, 0)");
                this.ctx.fillStyle = glowGradient; this.ctx.fillRect(this.lightBarX - 40 * glow, 0, 80 * glow, this.h);
            }
        }
        
        // PARTICLE SYSTEM (THREE.JS)
        class ParticleSystem {
            constructor() {
                this.scene = new THREE.Scene();
                this.camera = new THREE.OrthographicCamera(-window.innerWidth/2, window.innerWidth/2, 150, -150, 1, 1000);
                this.camera.position.z = 100;
                this.renderer = new THREE.WebGLRenderer({ canvas: particleCanvas, alpha: true });
                this.renderer.setSize(window.innerWidth, 300);
                this.renderer.setClearColor(0x000000, 0);
                this.particleCount = 5000;
                this.createParticles();
                this.animate();
                window.addEventListener("resize", () => this.onWindowResize());
            }
            createParticles() {
                const geometry = new THREE.BufferGeometry();
                const positions = new Float32Array(this.particleCount * 3);
                this.velocities = new Float32Array(this.particleCount);

                for (let i = 0; i < this.particleCount; i++) {
                    positions[i*3] = (Math.random() - 0.5) * window.innerWidth * 2;
                    positions[i*3+1] = (Math.random() - 0.5) * 300;
                    this.velocities[i] = Math.random() * 0.3 + 0.1;
                }
                geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

                const material = new THREE.PointsMaterial({ color: 0x8A2BE2, size: 0.5, transparent: true, opacity: 0.5 });
                this.particles = new THREE.Points(geometry, material);
                this.scene.add(this.particles);
            }
            animate() {
                requestAnimationFrame(() => this.animate());
                const positions = this.particles.geometry.attributes.position.array;
                for (let i = 0; i < this.particleCount; i++) {
                    positions[i*3] += this.velocities[i];
                    if (positions[i*3] > window.innerWidth / 2 + 50) {
                        positions[i*3] = -window.innerWidth / 2 - 50;
                    }
                }
                this.particles.geometry.attributes.position.needsUpdate = true;
                this.renderer.render(this.scene, this.camera);
            }
            onWindowResize() {
                this.camera.left = -window.innerWidth/2; this.camera.right = window.innerWidth/2;
                this.camera.updateProjectionMatrix(); this.renderer.setSize(window.innerWidth, 300);
            }
        }

        cardStreamController = new CardStreamController();
        particleSystem = new ParticleSystem();
        particleScanner = new ParticleScanner();
    });
    </script>
</body>
</html>

